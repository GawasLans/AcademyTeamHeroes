{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>{% if practicante %}Editar{% else %}Añadir{% endif %} Practicante - TEAM HEROES</title>
    <link rel="stylesheet" href="{% static 'css/style.css' %}">
</head>
<body class="light-mode">
    <header class="main-header">
        <h1 class="main-title">Team Héroes</h1>
        <button class="icon-button menu-toggle" id="mobile-menu-toggle">☰</button>
        <nav class="main-nav" id="mobile-menu">
            <ul class="main-menu">
                <li><a href="{% url 'index_maestro' %}">Inicio</a></li>
                <li class="has-submenu dropdown">
                    <a href="equipo_maestro" class="dropdown-toggle">Equipo</a>
                    <ul class="dropdown-menu">
                        <li><a href="{% url 'equipo_maestro' %}"><i class="fas fa-users"></i> Ver Equipo</a></li>
                        <li><a href="{% url 'crear_practicante' %}"><i class="fas fa-user-plus"></i> Crear Practicante</a></li>
                    </ul>
                </li>
            </ul>
        </nav>
        <div class="header-actions">
            <button id="mode-toggle" class="icon-button">☀️</button>
            <img src="{% static 'img/logo-heroes.png' %}" alt="Logo Heroes" class="header-logo">
        </div>
    </header>

    <main class="container">
        <section id="add-practicante-section" class="form-section">
            <div class="form-header">
                <h3 id="form-title">{% if practicante %}Editar Practicante{% else %}Añadir Practicante{% endif %}</h3>
            </div>
            <form id="practicante-form" method="POST" enctype="multipart/form-data">
                {% csrf_token %}
                <input type="hidden" id="practicante-id" name="practicante-id" value="{{ practicante.id|default:'' }}">
                <div class="photo-upload">
                    <label for="foto-input" class="file-upload-label">Subir Foto</label>
                    <input type="file" id="foto-input" name="foto" accept="image/*">
                </div>

                <div class="form-grid">
                    <div class="form-group">
                        <label for="nombre">Nombre</label>
                        <input type="text" id="nombre" name="nombre" value="{{ practicante.nombre|default:'' }}" required>
                    </div>
                    <div class="form-group">
                        <label for="apellido">Apellido</label>
                        <input type="text" id="apellido" name="apellido" value="{{ practicante.apellido|default:'' }}" required>
                    </div>
                    <div class="form-group">
                        <label for="dni">DNI</label>
                        <input type="text" id="dni" name="dni" value="{{ practicante.dni|default:'' }}" required>
                    </div>
                    <div class="form-group">
                        <label for="genero">Género</label>
                        <select id="genero" name="genero" required>
                            <option value="">Seleccionar</option>
                            <option value="Masculino" {% if practicante.genero == 'Masculino' %}selected{% endif %}>Masculino</option>
                            <option value="Femenino" {% if practicante.genero == 'Femenino' %}selected{% endif %}>Femenino</option>
                            <option value="Otro" {% if practicante.genero == 'Otro' %}selected{% endif %}>Otro</option>
                        </select>
                    </div>
                    <div class="form-group">
                        <label for="fecha-nacimiento">Fecha de Nacimiento</label>
                        <input type="date" id="fecha-nacimiento" name="fecha-nacimiento" value="{{ practicante.fecha_nacimiento|default:'' }}" required>
                    </div>
                    <div class="form-group">
                        <label for="pais">País</label>
                        <input type="text" id="pais" name="pais" value="{{ practicante.pais|default:'' }}" required>
                    </div>
                    <div class="form-group">
                        <label for="email">Email</label>
                        <input type="email" id="email" name="email" value="{{ practicante.email|default:'' }}" required>
                    </div>
                    <div class="form-group">
                        <label for="peso">Peso (kg)</label>
                        <input type="number" id="peso" name="peso" step="0.1" value="{{ practicante.peso|default:'' }}">
                    </div>
                    <div class="form-group">
                        <label for="altura">Altura (mts)</label>
                        <input type="number" id="altura" name="altura" step="0.01" value="{{ practicante.altura|default:'' }}">
                    </div>
                    <div class="form-group">
                        <label for="disciplina">Disciplina</label>
                        <select id="disciplina" name="disciplina" required>
                            <option value="">Seleccionar</option>
                            {% for disciplina in disciplinas %}
                                <option value="{{ disciplina.id }}" {% if practicante.disciplina == disciplina %}selected{% endif %}>{{ disciplina.nombre }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div class="form-group">
    <label for="grado">Grado</label>
    <select id="grado" name="grado" required>
        {% if practicante.grado %}
        <option value="{{ practicante.grado }}" selected>{{ practicante.grado }}</option>
        {% else %}
        <option value="">Seleccionar grado</option>
        {% endif %}
    </select>
</div>
                <div class="form-grid">
    <div class="form-group">
        <label for="dias-entrenamiento">Días de Entrenamiento</label>
        <select id="dias-entrenamiento" name="dias-entrenamiento" class="form-control">
            <option value="">Seleccionar días</option>
            {% for value, label in dias_choices %}
                <option value="{{ value }}" {% if practicante.dias_entrenamiento == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="hora-entrenamiento">Hora de Entrenamiento</label>
        <select id="hora-entrenamiento" name="hora-entrenamiento" class="form-control">
            <option value="">Seleccionar hora</option>
            {% for value, label in hora_choices %}
                <option value="{{ value }}" {% if practicante.hora_entrenamiento == value %}selected{% endif %}>{{ label }}</option>
            {% endfor %}
        </select>
    </div>
    
    </div>

                    <div class="form-group">
                        <label for="licencia">N° Licencia</label>
                        <input type="text" id="licencia" name="licencia" value="{{ practicante.licencia|default:'' }}">
                    </div>
                    <div class="form-group">
                        <label for="fecha-caducidad">Caducidad Licencia</label>
                        <input type="date" id="fecha-caducidad" name="fecha-caducidad" value="{{ practicante.fecha_caducidad|default:'' }}">
                    </div>
                    <div class="form-group">
                        <label>Rol:</label>
                        <div class="radio-group">
                            <label><input type="radio" name="rol" value="practicante" {% if practicante.rol == 'practicante' %}checked{% endif %}> Practicante</label>
                            <label><input type="radio" name="rol" value="profesor" {% if practicante.rol == 'profesor' %}checked{% endif %}> Profesor</label>
                        </div>
                    </div>
                </div>

                <div class="form-actions">
                    <a href="{% url 'equipo_maestro' %}" class="form-button secondary">Cancelar</a>
                    <button type="submit" class="form-button save-button">Guardar cambios</button>
                </div>
            </form>
        </section>
    </main>
    <script>
document.addEventListener('DOMContentLoaded', function() {
    const disciplinaSelect = document.getElementById('disciplina');
    const gradoSelect = document.getElementById('grado');
    
    const gradosITF = [
        "Cinturon blanco", "Cinturon blanco punta amarilla", "Cinturon amarillo", 
        "Cinturon amarillo punta verde", "Cinturon verde", "Cinturon verde punta azul", 
        "Cinturon azul", "Cinturon azul punta roja", "Cinturon roja", 
        "Cinturon roja punta negra", "Cinturon Negro 1st Dan", "2nd Dan", 
        "3rd Dan", "4th Dan", "5th Dan", "6th Dan", "7th Dan", "8th Dan", 
        "9th Dan", "10th Dan"
    ];

    const gradosKombat = [
        "Level 1", "Level 2", "Level 3", "Level 4", "Level 5", 
        "1st Dan", "2nd Dan", "3rd Dan", "4th Dan", "5th Dan", 
        "6th Dan", "7th Dan", "8th Dan", "9th Dan", "10th Dan"
    ];
    
    const itfId = "{{ itf_id }}";
    const kombatId = "{{ kombat_id }}";

    const updateGradoOptions = () => {
        const selectedDisciplineId = disciplinaSelect.value;
        gradoSelect.innerHTML = '<option value="">Seleccionar grado</option>';
        
        let grados = [];
        if (selectedDisciplineId === itfId) {
            grados = gradosITF;
        } else if (selectedDisciplineId === kombatId) {
            grados = gradosKombat;
        }

        grados.forEach(grado => {
            const option = document.createElement('option');
            option.value = grado;
            option.textContent = grado;
            if ("{{ practicante.grado }}" === grado) {
                option.selected = true;
            }
            gradoSelect.appendChild(option);
        });
    };

    disciplinaSelect.addEventListener('change', updateGradoOptions);
    
    // Llama a la función al cargar la página si ya hay una disciplina seleccionada
    if (disciplinaSelect.value) {
        updateGradoOptions();
    }
});
</script>
    <script src="{% static 'js/app.js' %}"></script>
    <script src="https://kit.fontawesome.com/c167814b7e.js" crossorigin="anonymous"></script>
</body>
</html>